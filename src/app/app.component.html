<hello name="{{ name }}"></hello>
<p>
  Start editing to see some magic happen :)
</p>

<h4>LEGO Stores</h4>

<mat-form-field appearance="fill">
<mat-label>State</mat-label>
<mat-select [formControl]="stateControl">
  <mat-option>-- All --</mat-option>
  <mat-option *ngFor="let state of franchises" [value]="state.name" [disabled]="state.disabled">
      {{state.name}}
  </mat-option>
</mat-select>
</mat-form-field>

<mat-form-field appearance="fill">
  <mat-label>Store</mat-label>
  <mat-select [formControl]="franchiseControl">
    <ng-container *ngIf="!stateControl.value">
      <mat-option>-- None --</mat-option>
      <mat-optgroup *ngFor="let group of franchises" [label]="group.name" [disabled]="group.disabled">
        <ng-container *ngIf="!stateControl.value || stateControl.value === group.name ">
          <mat-option *ngFor="let franchise of group.franchises" [value]="franchise.name">
            {{franchise.name}}
          </mat-option>
        </ng-container>
      </mat-optgroup>
    </ng-container>
    <ng-container *ngIf="stateControl.value">
      <ng-container *ngFor="let group of franchises">
        <ng-container *ngIf="!stateControl.value || stateControl.value === group.name ">
          <mat-option *ngFor="let franchise of group.franchises" [value]="franchise.name">
            {{franchise.name}}
          </mat-option>
        </ng-container>
      </ng-container>
    </ng-container>
  </mat-select>
</mat-form-field>